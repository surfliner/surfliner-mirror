apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "lark.fullname" . }}-env
  labels:
    app.kubernetes.io/name: {{ include "lark.name" . }}
    helm.sh/chart: {{ include "lark.chart" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
data:
  {{- if .Values.ezid.enabled }}
  MINTER: "ezid"
  EZID_DEFAULT_SHOULDER: {{ .Values.ezid.shoulder | quote }}
  {{- end }}
  APP_HOST: {{ index .Values.ingress.hosts 0 }}
  APP_PORT: {{ .Values.service.port | quote }}
  INDEX_ADAPTER: {{ .Values.persistence_adapters.index }}
  EVENT_ADAPTER: {{ .Values.persistence_adapters.event }}
  POSTGRES_DB: {{ .Values.postgresql.postgresqlDatabase }}
  POSTGRES_HOST: {{ template "lark.postgresql.fullname" . }}
  POSTGRES_PORT: {{ .Values.postgresql.servicePort | quote }}
