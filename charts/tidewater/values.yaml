# Default values for starlight.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: registry.gitlab.com/surfliner/surfliner/tidewater_web
  name: tidewater_web
  tag: stable
  pullPolicy: Always

consumer:
  replicaCount: 1
  enabled: true
  existingSecret:
    name: tidewater-consumer
    enabled: false
  rabbitmq:
    topic: comet.publish
    host: rabbitmq
    routing_key: comet.publish.tidewater
    username: user
    password: bitnami
    port: 5672

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Set to true if a Secret already exists in the namespace for the Deployment
existingSecret:
  name: tidewater
  enabled: false

# additional volumes and volume mounts, evaluated as a template, e.g.
#
#  extraVolumeMounts
#    - name: local-app
#      mountPath: /home/starlight/app
#  extraVolumes:
#    - name: local-app
#      hostPath:
#        path: /src
#        type: DirectoryOrCreate
extraVolumeMounts: []
extraVolumes: []

# Extra container spec configuration
# Example: (enabling pry debugging for local development)
# Note: with this enabled, one can `kubectl attach` to a running container with a binding.pry breakpoint
#
#extraContainerConfiguration:
# stdin: true
# tty: true
extraContainerConfiguration: []

# additional environment variables, evaluated as a template. e.g.
#
#  extraEnvVars:
#    - name: TEST_SOLR_URL
#      value: "my-test-solr-url"
extraEnvVars: []

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: 20m
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts: ['tidewater.local']
  tls: []

tidewater:
  # solrRunMode: cloud
  # disableSolrConfigInit: false
  allow_robots: false # allow crawling via robots.txt
  # loadSolrConfigSet: true # use false to skip solr configset maintenance init container
  application:
    name: "Tidewater"
    themes: "ucsb,surfliner,ucsd"
  analytics: {}
    # webPropertyId: # e.g UA-12345555-11
  port: 3000
  rails:
    db_adapter: postgresql
    db_setup_command: "db:migrate"
    environment: production
    log_to_stdout: true
    max_threads: 5
    queue: sidekiq
    serve_static_files: true
  sample_data: false

# see: https://github.com/bitnami/charts/blob/master/bitnami/memcached/README.md
# memcached:
#   enabled: true
#   architecture: high-availability
#   # requires architecture: high-availability
#   persistence:
#     enabled: true
#     size: 8Gi
#   image:
#     repository: bitnami/memcached
#     tag: 1.6.13-debian-10-r1

# see: https://github.com/kubernetes/charts/blob/master/stable/postgresql/README.md
postgresql:
  image:
    repository: bitnami/postgresql
    tag: 12.9.0-debian-10-r73
  enabled: true
  cpu: 1000m
  memory: 1Gi
  postgresqlUsername: tidewater
  postgresqlPassword: tidewater_pass
  postgresqlDatabase: tidewater_db
  postgresqlPostgresPassword: tidewater_admin
  servicePort: 5432
  persistence:
    size: 10Gi

oai:
  adminEmail: tidewater@example.com
  repositoryName: tidewater
  sampleId: 13900
  # namespaceIdentifier: item


resources: {}

nodeSelector: {}

tolerations: []
