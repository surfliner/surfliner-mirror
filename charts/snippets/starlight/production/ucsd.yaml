ingress:
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: 100m
  hosts:
    - exhibits.ucsd.edu
  tls:
    - hosts:
        - exhibits.ucsd.edu
      secretName: tls-secret
vaultSecret:
  enabled: true
  annotations:
    vault.hashicorp.com/agent-pre-populate-only: 'true'
    vault.hashicorp.com/agent-inject: 'true'
    vault.hashicorp.com/agent-init-first: 'true'
    vault.hashicorp.com/role: 'starlight-prod'
    vault.hashicorp.com/agent-inject-secret-starlight.env: 'applications/starlight/prod'
    vault.hashicorp.com/agent-inject-template-starlight.env: |
      {{- with secret "applications/starlight/prod" -}}
      {{- range $k, $v := .Data.data }}
      export {{ $k | toUpper }}='{{ $v }}'
      {{- end }}
      {{- end }}
postgresql:
  enabled: false
  postgresqlHostname: lib-psql-prod.ucsd.edu
  postgresqlDatabase: starlight
solr:
  enabled: false
  solrHostname: lib-solr-prod.ucsd.edu
  solrPort: "9020"
  coreName: starlight
starlight:
  solrRunMode: standalone
  allow_robots: true
  application:
    name: "Digital Exhibits"
  analytics:
    webPropertyId: UA-3409104-68
  storage:
    enabled: true
    accessKey: uhedJUGHTahvohloo1Oh
    acl: bucket-owner-full-control
    bucket: starlight-production
    endpointUrl: https://lib-minio.ucsd.edu:9006
    region: us-west-2
  backups:
    import:
      dbBackupSource: s3://starlight-production-backups/starlight.dmp
      dbBackupDestination: /tmp/starlight-backup.dmp
      destinationPath: s3://starlight-production/uploads
      enabled: false
      solrReindex: true
      oldAppUrl: https://exhibits.ucsd.edu
      sourcePath: s3://starlight-production-backups/uploads
    export:
      enabled: false
  sitemaps:
    enabled: true
  email:
    from_address: digitalexhibits@ucsd.edu
    delivery_method: smtp
    smtp_settings:
      address: smtp.ucsd.edu
      port: 587
      user_name: digitalexhibits
      authentication: login
  auth:
    method: google

resources:
  limits:
    cpu: 5000m
    memory: 3000Mi
  requests:
    cpu: 2000m
    memory: 1500Mi

workerResources:
  limits:
    cpu: 1000m
    memory: 1000Mi
  requests:
    cpu: 500m
    memory: 500Mi
