---
- name: enable epel repo
  yum:
    name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
  become: yes

- name: update all yum packages
  yum:
    name: "*"
    state: latest
    update_cache: yes
  become: yes

- name: Install Solr dependencies
  yum:
    name: "{{ item }}"
    state: present
  with_items:
    - java-1.8.0-openjdk
    - lsof
  become: yes

- name: Ensure {{ install_path }} is writeable
  file:
    path: "{{ install_path }}"
    state: directory
    mode: 0777
  become: yes
