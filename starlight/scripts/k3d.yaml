##
# Development chart settings for k3d deployments
#
# See k3d.io for cluster documentation.
#
# To run this development environment you need to run, in order, from `surfliner/starlight/`:
#
#   - make setup
#   - make build # this will fail if you don't have a registry running
#   - make deploy
#
# You'll need a pretty robust amount of disk space on your Docker `data-root`
# for the ephemeral storage and volume claims in the deployment, at least
# 10 GB to be safe. `make clean` should reclaim this space.
#
# Helm will tell you your deployment is at a place, but it's really at
# http://starlight.k3d.localhost:8080.
#
sourceFrom: /src # map local code updates to the Helm deployment
image:
  tag: local
ingress:
  enabled: true
  hosts: ['starlight.k3d.localhost']
persistence:
  enabled: false
minio:
  enabled: true
postgresql:
  persistence:
    enabled: false
redis:
  cluster:
    enabled: false
  master:
    persistence:
      enabled: false
memcached:
  architecture: standalone
  persistence:
    enabled: false
solr:
  javaMem: "-Xms512M -Xmx1g"
  resources:
   limits:
     memory: 1Gi
   requests:
     memory: 512Mi
  volumeClaimTemplates:
    enabled: false
  replicaCount: 3
  zookeeper:
    env:
      JVMFLAGS: "-Xms512m -Xmx1g"
    resources:
     limits:
       memory: 1Gi
     requests:
       memory: 512Mi
    persistence:
      enabled: false
    replicaCount: 3
starlight:
  auth:
    method: developer
  sitemaps:
    enabled: false
  rails:
    environment: development
    serve_static_files: false
